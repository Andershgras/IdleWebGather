<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IdleGatherWebGame</title>
    <base href="/" />
    <!-- DEV: add cache-busting query to avoid stale CSS -->
    <link rel="stylesheet" href="css/app.css?v=dev1" />
    <!-- DEV: favicon (prevents 404) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ctext y='14' font-size='14'%3EðŸŒ²%3C/text%3E%3C/svg%3E">

    <!-- DEV: Disable PWA/service worker to avoid stale caches -->
    <!-- <link href="manifest.webmanifest" rel="manifest" /> -->
    <!-- <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" /> -->
    <!-- <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" /> -->
</head>
<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%"></circle>
            <circle r="40%" cx="50%" cy="50%"></circle>
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>

    <!-- DEV: nuke any existing service workers & caches on localhost -->
    <script>
        if (location.hostname === "localhost" || location.hostname === "127.0.0.1") {
            try {
                navigator.serviceWorker?.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
                caches?.keys().then(keys => keys.forEach(k => caches.delete(k)));
            } catch { }
        }
    </script>

    <!-- DEV: cache-bust js too -->
    <script src="js/storage.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
</body>
</html>
