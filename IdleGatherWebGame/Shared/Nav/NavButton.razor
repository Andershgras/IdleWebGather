<button class="menu-item full @(Active ? "active" : null)" @onclick="OnClick">
    <div class="nav-row">
        <div class="nav-left">
            <span class="nav-icon">@Icon</span>
            <span class="nav-label">@Label</span>
        </div>
        <div class="nav-right">
            <span class="nav-level">@Level</span>
        </div>
    </div>

    @if (ShowMini)
    {
        <div class="mini-progress">
            <div style="width:@ProgressPercent%"></div>
        </div>
    }
</button>

@code {
    [Parameter] public string Id { get; set; } = "";
    [Parameter] public string Label { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public bool Active { get; set; }
    [Parameter] public bool ShowMini { get; set; } = true;
    [Parameter] public int Level { get; set; }
    [Parameter] public double Xp { get; set; }
    [Parameter] public double XpForNextLevel { get; set; } = 1;
    [Parameter] public EventCallback<string> OnChange { get; set; }

    private string ProgressPercent => Math.Clamp((Xp / Math.Max(1, XpForNextLevel)) * 100, 0, 100).ToString("0");
    private Task OnClick() => OnChange.InvokeAsync(Id);
}
